!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.rd3=e()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";{var React=require("react"),d3=require("d3"),common=require("./common"),Chart=common.Chart,XAxis=common.XAxis,YAxis=common.YAxis,Area=React.createClass({displayName:"Area",propTypes:{path:React.PropTypes.string,fill:React.PropTypes.string},getDefaultProps:function(){return{fill:"#3182bd"}},render:function(){return React.createElement("path",{className:"area-path",d:this.props.path,fill:this.props.fill})}}),DataSeries=exports.DataSeries=React.createClass({displayName:"DataSeries",render:function(){var props=this.props,area=d3.svg.area().x(function(d){return props.xScale(props.xAccessor(d))}).y0(function(d){return props.yScale(d.y0)}).y1(function(d){return props.yScale(d.y0+props.yAccessor(d))}),path=area(props.data);return React.createElement(Area,{fill:props.colors(props.name),path:path})}});exports.AreaChart=React.createClass({displayName:"AreaChart",propTypes:{data:React.PropTypes.oneOfType([React.PropTypes.array,React.PropTypes.object]),yAxisTickCount:React.PropTypes.number,xAxisTickInterval:React.PropTypes.object,colors:React.PropTypes.func,width:React.PropTypes.number,height:React.PropTypes.number,title:React.PropTypes.string,xAccessor:React.PropTypes.func,yAccessor:React.PropTypes.func},getDefaultProps:function(){return{data:[],colors:d3.scale.category20c(),margins:{top:10,right:20,bottom:30,left:30},legendOffset:120,yAxisTickCount:4,width:400,height:200,title:"",xAccessor:function(d){return d.x},yAccessor:function(d){return d.y}}},render:function(){var chartWidth,chartHeight,props=this.props;chartWidth=props.width-props.margins.left-props.margins.right,chartHeight=props.height-props.margins.top-props.margins.bottom,props.legend&&(chartWidth-=props.legendOffset),Array.isArray(props.data)||(props.data=[props.data]);var yScale=d3.scale.linear().range([chartHeight,0]),xValues=[],yValues=[],seriesNames=[];props.data.forEach(function(series){seriesNames.push(series.name),series.values.forEach(function(val){xValues.push(props.xAccessor(val)),yValues.push(props.yAccessor(val))})});var xScale;xScale=xValues.length>0&&"[object Date]"===Object.prototype.toString.call(xValues[0])&&props.xAxisTickInterval?d3.time.scale().range([0,chartWidth]):d3.scale.linear().range([0,chartWidth]),xScale.domain(d3.extent(xValues)),yScale.domain(d3.extent(yValues)),props.colors.domain(seriesNames);var stack=d3.layout.stack().x(props.xAccessor).y(props.yAccessor).offset("expand").order("reverse").values(function(d){return d.values}),layers=stack(props.data),trans="translate("+props.margins.left+","+props.margins.top+")",dataSeries=layers.map(function(d,idx){return React.createElement(DataSeries,{key:idx,name:d.name,colors:props.colors,index:idx,xScale:xScale,yScale:yScale,data:d.values,xAccessor:props.xAccessor,yAccessor:props.yAccessor})});return React.createElement(Chart,{ref:"chart",width:this.props.width,height:this.props.height,margins:this.props.margins,title:this.props.title},React.createElement("g",{transform:trans},dataSeries,React.createElement(XAxis,{xAxisClassName:"area x axis",xScale:xScale,xAxisTickInterval:this.props.xAxisTickInterval,xAxisTickCount:4,margins:props.margins,width:chartWidth,height:chartHeight}),React.createElement(YAxis,{yAxisClassName:"area y axis",yScale:yScale,margins:props.margins,yAxisTickCount:this.props.yAxisTickCount,width:chartWidth,height:props.height})))}})}},{"./common":5,d3:"d3",react:"react"}],2:[function(require,module,exports){"use strict";{var React=require("react"),d3=require("d3"),common=require("./common"),Chart=common.Chart,XAxis=common.XAxis,YAxis=common.YAxis,Bar=React.createClass({displayName:"Bar",propTypes:{fill:React.PropTypes.string,width:React.PropTypes.number,height:React.PropTypes.number,offset:React.PropTypes.number},getDefaultProps:function(){return{offset:0}},render:function(){return React.createElement("rect",{fill:this.props.fill,width:this.props.width,height:this.props.height,x:this.props.offset,y:this.props.availableHeight-this.props.height})}}),DataSeries=exports.DataSeries=React.createClass({displayName:"DataSeries",propTypes:{fill:React.PropTypes.string,title:React.PropTypes.string,padding:React.PropTypes.number,width:React.PropTypes.number,height:React.PropTypes.number,offset:React.PropTypes.number},getDefaultProps:function(){return{padding:.1,data:[]}},render:function(){var props=this.props,xScale=d3.scale.ordinal().domain(d3.range(props.values.length)).rangeRoundBands([0,props.width],props.padding),bars=props.values.map(function(point,i){return React.createElement(Bar,{height:props.yScale(0)-props.yScale(point),width:xScale.rangeBand(),offset:xScale(i),availableHeight:props.height,fill:props.fill,key:i})});return React.createElement("g",null,bars)}});exports.BarChart=React.createClass({displayName:"BarChart",propTypes:{data:React.PropTypes.array,yAxisTickCount:React.PropTypes.number,width:React.PropTypes.number,margins:React.PropTypes.object,height:React.PropTypes.number,fill:React.PropTypes.string,title:React.PropTypes.string},getDefaultProps:function(){return{data:[],yAxisTickCount:4,width:500,height:200,margins:{top:20,right:30,bottom:30,left:30},fill:"#3182bd",title:""}},render:function(){var props=this.props,values=props.data.map(function(item){return item.value}),labels=props.data.map(function(item){return item.label}),margins=props.margins,sideMargins=margins.left+margins.right,topBottomMargins=margins.top+margins.bottom,yScale=d3.scale.linear().domain([d3.min([d3.min(values),0]),d3.max(values)]).range([props.height-topBottomMargins,0]),xScale=d3.scale.ordinal().domain(labels).rangeRoundBands([0,props.width-sideMargins],.1),trans="translate("+margins.left+","+margins.top+")";return React.createElement(Chart,{width:props.width,height:props.height,title:props.title},React.createElement("g",{transform:trans},React.createElement(DataSeries,{values:values,yScale:yScale,xScale:yScale,margins:margins,data:props.data,width:props.width-sideMargins,height:props.height-topBottomMargins,fill:props.fill}),React.createElement(YAxis,{yAxisClassName:"bar y axis",yScale:yScale,margins:margins,yAxisTickCount:props.yAxisTickCount,width:props.width-sideMargins,height:props.height-topBottomMargins}),React.createElement(XAxis,{xAxisClassName:"bar x axis",xScale:xScale,data:props.data,margins:margins,width:props.width-sideMargins,height:props.height-topBottomMargins})))}})}},{"./common":5,d3:"d3",react:"react"}],3:[function(require,module,exports){"use strict";var React=require("react"),d3=require("d3");exports.XAxis=React.createClass({displayName:"XAxis",propTypes:{xAxisClassName:React.PropTypes.string.isRequired,xOrient:React.PropTypes.oneOf(["top","bottom"]),xScale:React.PropTypes.func.isRequired,xHideOrigin:React.PropTypes.bool,height:React.PropTypes.number.isRequired,fill:React.PropTypes.string,stroke:React.PropTypes.string,tickStroke:React.PropTypes.string,strokeWidth:React.PropTypes.string},getDefaultProps:function(){return{xAxisClassName:"x axis",xOrient:"bottom",xHideOrigin:!1,fill:"none",stroke:"none",tickStroke:"#000",strokeWidth:"none",hideOrigin:!1}},componentDidMount:function(){this._renderAxis(this.props)},componentWillReceiveProps:function(props){this._renderAxis(props)},_renderAxis:function(props){var xAxis=d3.svg.axis().scale(props.xScale).orient(props.xOrient);props.xAxisTickInterval?xAxis.ticks(d3.time[props.xAxisTickInterval.unit],props.xAxisTickInterval.interval):props.xAxisTickCount&&xAxis.ticks(props.xAxisTickCount);var xAxisClassSelect=props.xAxisClassName.replace(/ /g,".");"."!=xAxisClassSelect[0]&&(xAxisClassSelect="."+xAxisClassSelect);var node=this.refs.xaxis.getDOMNode();if(d3.select(node).attr("class",props.xAxisClassName).call(xAxis),d3.selectAll(xAxisClassSelect).selectAll("line").attr("shape-rendering","crispEdges").attr("stroke",props.tickStroke),d3.selectAll(xAxisClassSelect).select("path").attr("shape-rendering","crispEdges").attr("fill",props.fill).attr("stroke",props.stroke).attr("stroke-width",props.strokeWidth),props.xHideOrigin){var originSelect=xAxisClassSelect+" g:first-child";d3.selectAll(originSelect).style("opacity","0")}},render:function(){var props=this.props,t="translate(0,"+props.height+")";return React.createElement("g",{ref:"xaxis",className:props.xAxisClassName,transform:t})}}),exports.YAxis=React.createClass({displayName:"YAxis",propTypes:{yAxisClassName:React.PropTypes.string,yOrient:React.PropTypes.oneOf(["left","right"]),yScale:React.PropTypes.func.isRequired,yHideOrigin:React.PropTypes.bool,fill:React.PropTypes.string,stroke:React.PropTypes.string,tickStroke:React.PropTypes.string,strokeWidth:React.PropTypes.string},getDefaultProps:function(){return{yAxisClassName:"y axis",yOrient:"left",yHideOrigin:!1,fill:"none",stroke:"#000",tickStroke:"#000",strokeWidth:"none"}},componentDidMount:function(){this._renderAxis(this.props)},componentWillReceiveProps:function(props){this._renderAxis(props)},_renderAxis:function(props){var yAxis=d3.svg.axis().ticks(props.yAxisTickCount).scale(props.yScale).orient(this.props.yOrient);props.yAxisTickCount?yAxis.ticks(props.yAxisTickCount):props.yAxisTickInterval&&yAxis.ticks(d3.time[props.yAxisTickInterval.unit],props.yAxisTickInterval.interval);var yAxisClassSelect=props.yAxisClassName.replace(/ /g,".");"."!=yAxisClassSelect[0]&&(yAxisClassSelect="."+yAxisClassSelect);var node=this.refs.yaxis.getDOMNode();if(d3.select(node).attr("class",props.yAxisClassName).call(yAxis),d3.selectAll(yAxisClassSelect).selectAll("line").attr("shape-rendering","crispEdges").attr("stroke",props.tickStroke),d3.selectAll(yAxisClassSelect).select("path").attr("shape-rendering","crispEdges").attr("fill",props.fill).attr("stroke",props.stroke),props.yHideOrigin){var originSelect=yAxisClassSelect+" g:first-child";d3.selectAll(originSelect).style("opacity","0")}},render:function(){var props=this.props;return React.createElement("g",{ref:"yaxis",className:props.yAxisClassName})}})},{d3:"d3",react:"react"}],4:[function(require,module,exports){"use strict";var React=require("react"),Legend=require("./legend").Legend,PlainChart=React.createClass({displayName:"PlainChart",render:function(){return React.createElement("div",null,React.createElement("h4",null,this.props.title),React.createElement("svg",{width:this.props.width,height:this.props.height},this.props.children))}}),LegendChart=React.createClass({displayName:"LegendChart",propTypes:{legend:React.PropTypes.bool,legendPosition:React.PropTypes.string,sideOffset:React.PropTypes.number,margins:React.PropTypes.object,data:React.PropTypes.oneOfType([React.PropTypes.object,React.PropTypes.array])},getDefaultProps:function(){return{data:{},legend:!1,legendPosition:"right",sideOffset:90}},_renderLegend:function(){return this.props.legend?React.createElement(Legend,{legendPosition:this.props.legendPosition,margins:this.props.margins,colors:this.props.colors,data:this.props.data,width:this.props.width,height:this.props.height,sideOffset:this.props.sideOffset}):void 0},render:function(){return React.createElement("div",{style:{width:this.props.width,height:this.props.height}},React.createElement("h4",null,this.props.title),this._renderLegend(),React.createElement("svg",{width:this.props.width-this.props.sideOffset,height:this.props.height},this.props.children))}});exports.LegendChart=LegendChart,exports.Chart=React.createClass({displayName:"Chart",propTypes:{legend:React.PropTypes.bool},getDefaultProps:function(){return{legend:!1}},render:function(){return this.props.legend?React.createElement(LegendChart,React.__spread({},this.props)):React.createElement(PlainChart,React.__spread({},this.props))}})},{"./legend":6,react:"react"}],5:[function(require,module,exports){exports.XAxis=require("./axes").XAxis,exports.YAxis=require("./axes").YAxis,exports.Chart=require("./chart").Chart,exports.LegendChart=require("./chart").LegendChart,exports.Legend=require("./legend").Legend,exports.Voronoi=require("./voronoi").Voronoi},{"./axes":3,"./chart":4,"./legend":6,"./voronoi":7}],6:[function(require,module,exports){"use strict";var React=require("react"),d3=require("d3");exports.Legend=React.createClass({displayName:"Legend",propTypes:{width:React.PropTypes.number,height:React.PropTypes.number,margins:React.PropTypes.object,text:React.PropTypes.string,colors:React.PropTypes.func},getDefaultProps:function(){return{text:"#000",colors:d3.scale.category20c()}},render:function(){var props=this.props,textStyle={color:"black",fontSize:"50%",verticalAlign:"top"},legendItems=[];props.data.forEach(function(series,idx){var itemStyle={color:props.colors(idx),lineHeight:"60%",fontSize:"200%"};legendItems.push(React.createElement("li",{style:itemStyle,key:idx},React.createElement("span",{style:textStyle},series.name)))});var legendFloat="right",topMargin=props.margins.top,legendBlockStyle={wordWrap:"break-word",width:props.sideOffset,paddingLeft:"0",marginBottom:"0",marginTop:topMargin,"float":legendFloat};return React.createElement("ul",{style:legendBlockStyle},legendItems)}})},{d3:"d3",react:"react"}],7:[function(require,module,exports){"use strict";var React=require("react"),d3=require("d3"),Polygon=React.createClass({displayName:"Polygon",_animateCircle:function(){this.props.pubsub.emit("animate",this.props.id)},_restoreCircle:function(){this.props.pubsub.emit("restore",this.props.id)},_drawPath:function(d){return void 0!==d?"M"+d.join(",")+"Z":void 0},render:function(){return React.createElement("path",{onMouseOver:this._animateCircle,onMouseOut:this._restoreCircle,fill:"white",opacity:"0",d:this._drawPath(this.props.vnode)})}});exports.Voronoi=React.createClass({displayName:"Voronoi",render:function(){var xScale=this.props.xScale,yScale=this.props.yScale,voronoi=d3.geom.voronoi().x(function(d){return xScale(d.coord.x)}).y(function(d){return yScale(d.coord.y)}).clipExtent([[0,0],[this.props.width,this.props.height]]),regions=voronoi(this.props.data).map(function(vnode,idx){return React.createElement(Polygon,{pubsub:this.props.pubsub,key:idx,id:vnode.point.id,vnode:vnode})}.bind(this));return React.createElement("g",null,regions)}})},{d3:"d3",react:"react"}],8:[function(require,module,exports){require("d3"),require("react");exports.BarChart=require("./barchart").BarChart,exports.LineChart=require("./linechart").LineChart,exports.PieChart=require("./piechart").PieChart,exports.AreaChart=require("./areachart").AreaChart,exports.Treemap=require("./treemap").Treemap,exports.ScatterChart=require("./scatterchart").ScatterChart},{"./areachart":1,"./barchart":2,"./linechart":9,"./piechart":10,"./scatterchart":11,"./treemap":12,d3:"d3",react:"react"}],9:[function(require,module,exports){"use strict";{var React=require("react"),d3=require("d3"),common=require("./common"),Chart=common.Chart,XAxis=common.XAxis,YAxis=common.YAxis,Voronoi=common.Voronoi,EventEmitter=require("events").EventEmitter,pubsub=exports.pubsub=new EventEmitter,utils=require("./utils"),Line=React.createClass({displayName:"Line",propTypes:{data:React.PropTypes.object,strokeWidth:React.PropTypes.number,path:React.PropTypes.string,fill:React.PropTypes.string,stroke:React.PropTypes.string},getDefaultProps:function(){return{stroke:"#1f77b4",strokeWidth:1.5,fill:"none",className:"rd3-linechart-path"}},getInitialState:function(){return{lineStrokeWidth:this.props.strokeWidth,lineStroke:this.props.stroke}},componentDidMount:function(){pubsub.on("animate",this._animateLine),pubsub.on("restore",this._restoreLine)},componentWillUnmount:function(){pubsub.removeListener("animate",this._animateLine),pubsub.removeListener("restore",this._restoreLine)},_animateLine:function(id){this.props.id===id.split("-")[0]&&this.setState({lineStrokeWidth:1.8*this.state.lineStrokeWidth})},_restoreLine:function(id){this.props.id===id.split("-")[0]&&this.setState({lineStrokeWidth:this.props.strokeWidth})},render:function(){var props=this.props,state=this.state;return React.createElement("path",{d:props.path,stroke:state.lineStroke,strokeWidth:state.lineStrokeWidth,fill:props.fill,className:props.className})}}),Circle=React.createClass({displayName:"Circle",propTypes:{cx:React.PropTypes.number,cy:React.PropTypes.number,r:React.PropTypes.number,fill:React.PropTypes.string},getDefaultProps:function(){return{fill:"#1f77b4",className:"rd3-linechart-circle"}},getInitialState:function(){return{circleRadius:this.props.r,circleColor:this.props.fill}},componentDidMount:function(){pubsub.on("animateCircle",this._animateCircle),pubsub.on("restoreCircle",this._restoreCircle)},componentWillUnmount:function(){pubsub.removeListener("animateCircle",this._animateCircle),pubsub.removeListener("restoreCircle",this._restoreCircle)},render:function(){var props=this.props;return React.createElement("circle",{cx:props.cx,cy:props.cy,r:this.state.circleRadius,fill:this.state.circleColor,id:props.id,className:props.className})},_animateCircle:function(id){this.props.id===id&&this.setState({circleRadius:this.state.circleRadius*(5/4)})},_restoreCircle:function(id){this.props.id===id&&this.setState({circleRadius:this.props.r})}}),DataSeries=exports.DataSeries=React.createClass({displayName:"DataSeries",propTypes:{data:React.PropTypes.array,interpolationType:React.PropTypes.string,color:React.PropTypes.string,xAccessor:React.PropTypes.func,yAccessor:React.PropTypes.func},getDefaultProps:function(){return{data:[],interpolationType:"linear",color:"#fff",xAccessor:function(d){return d.x},yAccessor:function(d){return d.y}}},render:function(){var props=this.props,interpolatePath=d3.svg.line().x(function(d){return props.xScale(props.xAccessor(d))}).y(function(d){return props.yScale(props.yAccessor(d))}).interpolate(props.interpolationType),circles=props.data.map(function(point,i){return React.createElement(Circle,{cx:props.xScale(props.xAccessor(point)),cy:props.yScale(props.yAccessor(point)),r:props.pointRadius,fill:props.color,key:props.seriesName+i,id:props.seriesName+"-"+i})});return React.createElement("g",null,React.createElement(Line,{path:interpolatePath(props.data),stroke:props.color,id:props.seriesName}),circles)}}),Axes=React.createClass({displayName:"Axes",propTypes:{xAxisClassName:React.PropTypes.string.isRequired,xOrient:React.PropTypes.oneOf(["top","bottom"]),xScale:React.PropTypes.func.isRequired,xHideOrigin:React.PropTypes.bool,yAxisClassName:React.PropTypes.string.isRequired,yOrient:React.PropTypes.oneOf(["left","right"]),yScale:React.PropTypes.func.isRequired,yHideOrigin:React.PropTypes.bool,chartHeight:React.PropTypes.number.isRequired,chartWidth:React.PropTypes.number.isRequired,fill:React.PropTypes.string,stroke:React.PropTypes.string,tickStroke:React.PropTypes.string,strokeWidth:React.PropTypes.string},getDefaultProps:function(){return{axesColor:"#000"}},render:function(){var props=this.props;return React.createElement("g",null,React.createElement(YAxis,{yAxisClassName:props.yAxisClassName,yScale:props.yScale,yAxisTickCount:props.yAxisTickCount,yHideOrigin:props.yHideOrigin,margins:props.margins,width:props.chartWidth,height:props.chartHeight,stroke:props.axesColor}),React.createElement(XAxis,{xAxisClassName:props.xAxisClassName,strokeWidth:props.strokeWidth,xHideOrigin:props.xHideOrigin,xScale:props.xScale,margins:props.margins,width:props.chartWidth,height:props.chartHeight,stroke:props.axesColor}))}});exports.LineChart=React.createClass({displayName:"LineChart",propTypes:{margins:React.PropTypes.object,legendOffset:React.PropTypes.number,pointRadius:React.PropTypes.number,yHideOrigin:React.PropTypes.bool,xHideOrigin:React.PropTypes.bool,width:React.PropTypes.number,height:React.PropTypes.number,axesColor:React.PropTypes.string,title:React.PropTypes.string,colors:React.PropTypes.func,legend:React.PropTypes.bool,xAccessor:React.PropTypes.func,yAccessor:React.PropTypes.func},getDefaultProps:function(){return{margins:{top:10,right:20,bottom:40,left:30},legendOffset:120,pointRadius:3,width:400,height:200,axesColor:"#000",title:"",colors:d3.scale.category20c(),xAccessor:function(d){return d.x},yAccessor:function(d){return d.y}}},render:function(){var chartWidth,chartHeight,props=this.props;chartWidth=props.width-props.margins.left-props.margins.right,chartHeight=props.height-props.margins.top-props.margins.bottom,props.legend&&(chartWidth-=props.legendOffset),Array.isArray(props.data)||(props.data=[props.data]);var flattenedData=utils.flattenData(props.data,props.xAccessor,props.yAccessor),allValues=flattenedData.allValues,xValues=flattenedData.xValues,yValues=flattenedData.yValues;pubsub.setMaxListeners(xValues.length+yValues.length);var scales=utils.calculateScales(chartWidth,chartHeight,xValues,yValues),trans="translate("+props.margins.left+","+props.margins.top+")",dataSeriesArray=props.data.map(function(series,idx){return React.createElement(DataSeries,{xScale:scales.xScale,yScale:scales.yScale,seriesName:series.name,data:series.values,width:chartWidth,height:chartHeight,color:props.colors(idx),pointRadius:props.pointRadius,key:series.name})});return React.createElement(Chart,{legend:props.legend,data:props.data,margins:props.margins,colors:props.colors,width:props.width,height:props.height,title:props.title},React.createElement("g",{transform:trans},dataSeriesArray,React.createElement(Voronoi,{pubsub:pubsub,data:allValues,xScale:scales.xScale,yScale:scales.yScale,width:chartWidth,height:chartHeight}),React.createElement(Axes,{yAxisClassName:"line y axis",yScale:scales.yScale,yAxisTickCount:props.yAxisTickCount,yHideOrigin:props.yHideOrigin,xAxisClassName:"line x axis",xScale:scales.xScale,xHideOrigin:props.xHideOrigin,strokeWidth:"1",margins:props.margins,chartWidth:chartWidth,chartHeight:chartHeight,stroke:props.axesColor})))}})}},{"./common":5,"./utils":13,d3:"d3",events:14,react:"react"}],10:[function(require,module,exports){"use strict";{var React=require("react"),d3=require("d3"),Chart=require("./common").Chart,Arc=React.createClass({displayName:"Arc",getDefaultProps:function(){return{labelTextFill:"black",valueTextFill:"white"}},propTypes:{fill:React.PropTypes.string,d:React.PropTypes.string,startAngle:React.PropTypes.number,endAngle:React.PropTypes.number,innerRadius:React.PropTypes.number,outerRadius:React.PropTypes.number},render:function(){var props=this.props,arc=d3.svg.arc().innerRadius(props.innerRadius).outerRadius(props.outerRadius).startAngle(props.startAngle).endAngle(props.endAngle),rotate="rotate("+(props.startAngle+props.endAngle)/2*(180/Math.PI)+")",radius=(arc.centroid(),props.outerRadius),dist=radius+35,angle=(props.startAngle+props.endAngle)/2,x=1.2*dist*Math.sin(angle),y=-dist*Math.cos(angle),t="translate("+x+","+y+")";return React.createElement("g",{className:"arc-group"},React.createElement("path",{className:"arc",d:arc(),fill:props.fill}),React.createElement("line",{className:"arc-line",x1:"0",x2:"0",y1:-radius-2,y2:-radius-26,stroke:"black",transform:rotate,style:{fill:props.labelTextFill,strokeWidth:2}},">"),React.createElement("text",{className:"arc-label-text",transform:t,dy:".35em",style:{textAnchor:"middle",fill:props.labelTextFill,shapeRendering:"crispEdges"}},props.label),React.createElement("text",{className:"arc-value-text",transform:"translate("+arc.centroid()+")",dy:".35em",style:{shapeRendering:"crispEdges",textAnchor:"middle",fill:props.valueTextFill}},props.value+"%"))}}),DataSeries=React.createClass({displayName:"DataSeries",propTypes:{transform:React.PropTypes.string,data:React.PropTypes.array,innerRadius:React.PropTypes.number,radius:React.PropTypes.number},getDefaultProps:function(){return{innerRadius:0,data:[],color:d3.scale.category20c()}},render:function(){var props=this.props,pie=d3.layout.pie().sort(null),arcData=pie(props.data),color=props.color,arcs=arcData.map(function(arc,i){return React.createElement(Arc,{startAngle:arc.startAngle,endAngle:arc.endAngle,outerRadius:props.radius,innerRadius:props.innerRadius,labelTextFill:props.labelTextFill,valueTextFill:props.valueTextFill,fill:color(i),label:props.labels[i],value:props.data[i],key:i,width:props.width})});return React.createElement("g",{className:"pie-group",transform:props.transform},arcs)}});exports.PieChart=React.createClass({displayName:"PieChart",getDefaultProps:function(){return{title:""}},propTypes:{radius:React.PropTypes.number,cx:React.PropTypes.number,cy:React.PropTypes.number,labelTextFill:React.PropTypes.string,valueTextFill:React.PropTypes.string,color:React.PropTypes.func,title:React.PropTypes.string},render:function(){var props=this.props,transform="translate("+(props.cx||props.width/2)+","+(props.cy||props.height/2)+")",data=props.data.map(function(item){return item.value}),labels=props.data.map(function(item){return item.label});return React.createElement(Chart,{className:"pie-chart",width:props.width,height:props.height,title:props.title},React.createElement(DataSeries,{labelTextFill:props.labelTextFill,valueTextFill:props.valueTextFill,labels:labels,color:props.color,transform:transform,data:data,width:props.width,height:props.height,radius:props.radius,innerRadius:props.innerRadius}))}})}},{"./common":5,d3:"d3",react:"react"}],11:[function(require,module,exports){"use strict";{var React=require("react"),d3=require("d3"),common=require("./common"),Chart=common.Chart,XAxis=common.XAxis,YAxis=common.YAxis,Voronoi=common.Voronoi,EventEmitter=require("events").EventEmitter,pubsub=exports.pubsub=new EventEmitter,utils=require("./utils"),Circle=React.createClass({displayName:"Circle",propTypes:{id:React.PropTypes.string,cx:React.PropTypes.number,cy:React.PropTypes.number,r:React.PropTypes.number,fill:React.PropTypes.string,stroke:React.PropTypes.string,strokeWidth:React.PropTypes.number,strokeOpacity:React.PropTypes.number,hoverAnimation:React.PropTypes.bool},getDefaultProps:function(){return{fill:"#1f77b4"}},getInitialState:function(){return{circleRadius:this.props.r,circleColor:this.props.fill}},componentDidMount:function(){pubsub.on("animate",this._animateCircle),pubsub.on("restore",this._restoreCircle)},componentWillUnmount:function(){pubsub.removeListener("animate",this._animateCircle),pubsub.removeListener("restore",this._restoreCircle)},render:function(){return React.createElement("circle",{fill:this.state.circleColor,cx:this.props.cx,cy:this.props.cy,r:this.state.circleRadius,id:this.props.id})},_animateCircle:function(id){this.props.id===id&&this.setState({circleRadius:this.state.circleRadius*(5/4),circleColor:utils.shade(this.props.fill,-.2)})},_restoreCircle:function(id){this.props.id===id&&this.setState({circleRadius:this.props.r,circleColor:this.props.fill})}}),DataSeries=exports.DataSeries=React.createClass({displayName:"DataSeries",propTypes:{data:React.PropTypes.array,color:React.PropTypes.string,xAccessor:React.PropTypes.func,yAccessor:React.PropTypes.func},getDefaultProps:function(){return{data:[],color:"#fff",xAccessor:function(d){return d.x},yAccessor:function(d){return d.y}}},render:function(){var props=this.props,circles=props.data.map(function(point,i){return React.createElement(Circle,{cx:props.xScale(props.xAccessor(point)),cy:props.yScale(props.yAccessor(point)),r:props.pointRadius,fill:props.color,key:props.seriesName+i,id:props.seriesName+"-"+i})}.bind(this));return React.createElement("g",null,circles)}});exports.ScatterChart=React.createClass({displayName:"ScatterChart",propTypes:{margins:React.PropTypes.object,legendOffset:React.PropTypes.number,pointRadius:React.PropTypes.number,yHideOrigin:React.PropTypes.bool,xHideOrigin:React.PropTypes.bool,width:React.PropTypes.number,height:React.PropTypes.number,axesColor:React.PropTypes.string,title:React.PropTypes.string,colors:React.PropTypes.func,legend:React.PropTypes.bool,hoverAnimation:React.PropTypes.bool,xAccessor:React.PropTypes.func,yAccessor:React.PropTypes.func},getDefaultProps:function(){return{margins:{top:20,right:30,bottom:30,left:30},legendOffset:120,pointRadius:3,width:400,height:200,axesColor:"#000",title:"",colors:d3.scale.category20c(),hoverAnimation:!0,xAccessor:function(d){return d.x},yAccessor:function(d){return d.y}}},_calculateScales:utils.calculateScales,render:function(){var chartWidth,chartHeight,props=this.props;chartWidth=props.width-props.margins.left-props.margins.right,chartHeight=props.height-props.margins.top-props.margins.bottom,props.legend&&(chartWidth-=props.legendOffset),Array.isArray(props.data)||(props.data=[props.data]);var flattenedData=utils.flattenData(props.data,props.xAccessor,props.yAccessor),allValues=flattenedData.allValues,xValues=flattenedData.xValues,yValues=flattenedData.yValues;pubsub.setMaxListeners(xValues.length+yValues.length);var scales=this._calculateScales(chartWidth,chartHeight,xValues,yValues),trans="translate("+props.margins.left+","+props.margins.top+")",dataSeriesArray=props.data.map(function(series,idx){return React.createElement(DataSeries,{xScale:scales.xScale,yScale:scales.yScale,seriesName:series.name,data:series.values,width:chartWidth,height:chartHeight,color:props.colors(idx),pointRadius:props.pointRadius,key:series.name,hoverAnimation:props.hoverAnimation})});return React.createElement(Chart,{width:props.width,height:props.height,title:props.title},React.createElement("g",{transform:trans},React.createElement(Voronoi,{pubsub:pubsub,data:allValues,yScale:scales.yScale,xScale:scales.xScale,width:chartWidth,height:chartHeight}),dataSeriesArray,React.createElement(YAxis,{yAxisClassName:"scatter y axis",yScale:scales.yScale,yHideOrigin:props.yHideOrigin,margins:props.margins,yAxisTickCount:props.yAxisTickCount,width:chartWidth,height:chartHeight,stroke:props.axesColor}),React.createElement(XAxis,{xAxisClassName:"scatter x axis",strokeWidth:"1",xHideOrigin:props.xHideOrigin,xScale:scales.xScale,data:props.data,margins:props.margins,width:chartWidth,height:chartHeight,stroke:props.axesColor})))}})}},{"./common":5,"./utils":13,d3:"d3",events:14,react:"react"}],12:[function(require,module,exports){"use strict";var React=require("react"),d3=require("d3"),Chart=require("./common").Chart,Cell=React.createClass({displayName:"Cell",propTypes:{cellColor:React.PropTypes.string,width:React.PropTypes.number,height:React.PropTypes.number,label:React.PropTypes.string},render:function(){var textStyle={textAnchor:"middle",fill:this.props.textColor,fontSize:this.props.fontSize},t="translate("+this.props.x+","+this.props.y+")";return React.createElement("g",{transform:t},React.createElement("rect",{fill:this.props.cellColor,width:this.props.width,height:this.props.height}),React.createElement("text",{x:this.props.width/2,y:this.props.height/2,dy:".35em",style:textStyle},this.props.label))}}),DataSeries=React.createClass({displayName:"DataSeries",propTypes:{data:React.PropTypes.array,value:React.PropTypes.string},getDefaultProps:function(){return{data:[],value:"value",label:"label"}},render:function(){var data=this.props.data,value=this.props.value,label=this.props.label,color=d3.scale.category20c(),treemap=d3.layout.treemap().children(function(d){return d}).size([this.props.width,this.props.height]).sticky(!0).value(function(d){return d[value]}),cells=treemap(data).map(function(node,i){return React.createElement(Cell,{x:node.x,y:node.y,width:node.dx,height:node.dy,cellColor:color(i),label:node[label],fontSize:this.props.fontSize,textColor:this.props.textColor,key:i})},this);return React.createElement("g",{transform:this.props.transform,className:"treemap"},cells)
}}),Treemap=React.createClass({displayName:"Treemap",propTypes:{margins:React.PropTypes.object,data:React.PropTypes.array,width:React.PropTypes.number,height:React.PropTypes.number,title:React.PropTypes.string,textColor:React.PropTypes.string,fontSize:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.number])},getDefaultProps:function(){return{data:[],width:400,heigth:200,title:"",textColor:"#f7f7f7",fontSize:"0.65em"}},render:function(){return React.createElement(Chart,{title:this.props.title,width:this.props.width,height:this.props.height},React.createElement(DataSeries,{width:this.props.width,height:this.props.height,data:this.props.data,textColor:this.props.textColor,fontSize:this.props.fontSize}))}});exports.Treemap=Treemap},{"./common":5,d3:"d3",react:"react"}],13:[function(require,module,exports){var d3=require("d3");exports.calculateScales=function(chartWidth,chartHeight,xValues,yValues){var xScale,yScale;return xScale=d3.scale.linear().domain([d3.min([d3.min(xValues),0]),d3.max(xValues)]).range([0,chartWidth]),yScale=d3.scale.linear().domain([d3.min([d3.min(yValues),0]),d3.max(yValues)]).range([chartHeight,0]),{xScale:xScale,yScale:yScale}},exports.debounce=function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&func.apply(context,args)}},exports.flattenData=function(data){var allValues=[],xValues=[],yValues=[],coincidentCoordinateCheck={};return Object.keys(data).forEach(function(seriesName){data[seriesName].forEach(function(item,idx){if(!isNaN(item.x)&&!isNaN(item.y)){xValues.push(item.x),yValues.push(item.y);var xyCoords=item.x+"-"+item.y;if(!(xyCoords in coincidentCoordinateCheck)){coincidentCoordinateCheck[xyCoords]="";var pointItem={coord:{x:item.x,y:item.y},id:seriesName+"-"+idx};allValues.push(pointItem)}}})}),{allValues:allValues,xValues:xValues,yValues:yValues}},exports.shade=function(hex,percent){var R,G,B,red,green,blue,number,min=Math.min,round=Math.round;return 7!==hex.length?hex:(number=parseInt(hex.slice(1),16),R=number>>16,G=number>>8&255,B=255&number,red=min(255,round((1+percent)*R)).toString(16),green=min(255,round((1+percent)*G)).toString(16),blue=min(255,round((1+percent)*B)).toString(16),"#"+red+green+blue)}},{d3:"d3"}],14:[function(require,module){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||0>n||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;throw TypeError('Uncaught, unspecified "error" event.')}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:for(len=arguments.length,args=new Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];handler.apply(this,args)}else if(isObject(handler)){for(len=arguments.length,args=new Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];for(listeners=handler.slice(),len=listeners.length,i=0;len>i;i++)listeners[i].apply(this,args)}return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned){var m;m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-->0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(0>position)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.listenerCount=function(emitter,type){var ret;return ret=emitter._events&&emitter._events[type]?isFunction(emitter._events[type])?1:emitter._events[type].length:0}},{}]},{},[8])(8)});